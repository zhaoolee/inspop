(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(507)}])},507:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSG:function(){return E},default:function(){return S}});var c=n(5893),l=n(6486),o=n.n(l),r=n(7294),s=n(2887),a=n.n(s),i=n(269),u=n(1057),d=n(8553),x=n(1023),p=n(3619),h=n(5759),f=n(5071),g=n(8271),m=n(1265),v=n(2430),j=n(5819),b=n(9008),y=n.n(b);function F(e,t){const n=(0,r.useRef)();(0,r.useEffect)((()=>{n.current=e}),[e]),(0,r.useEffect)((()=>{if(null!==t){let e=setInterval((function(){n.current()}),t);return()=>clearInterval(e)}}),[t])}const _=e=>{let{imageUrl:t,onColorExtracted:n}=e;const l=(0,r.useRef)(null),o=new i.Z;return(0,r.useEffect)((()=>{function e(){const e=o.getPalette(l.current);n(e)}return l.current.complete?e():l.current.addEventListener("load",e),()=>{l.current.removeEventListener("load",e)}}),[t,n]),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("img",{ref:l,src:t,style:{display:"none"},crossOrigin:"anonymous"}),(0,c.jsx)("div",{className:a().fullScreenImage,style:{backgroundImage:"url('".concat(t,"')")}})]})};var E=!0;function S(e){let{csvData:t,wallpapersInfoJson:n,env:l}=e;const[s,i]=(0,r.useState)(0),[b,E]=(0,r.useState)(1e3*s),[S,w]=(0,r.useState)(null),[I,k]=(0,r.useState)("/images/black.jpg"),[Z,C]=(0,r.useState)("rgba(0, 0, 0, 0.2)"),[N,O]=(0,r.useState)("rgba(255, 255, 255, 0.5)"),P=[0,5,10,20,30,60,300],T=["No Play","Every 5 seconds","Every 10 seconds","Every 20 seconds","Every half minute","Every 1 minute","Every 5 minutes"],L=t.length-1,[M,z]=(0,r.useState)(!1),A=(0,g.ZP)(f.Z)((e=>{let{theme:t}=e;return{color:t.status.main,"&.Mui-checked":{color:t.status.main}}}));(0,r.useEffect)((()=>{{let e=0,t=localStorage.getItem("intervalTime");console.log("==localIntervalTime==",t);let n=o().toNumber(t);e=o().isNumber(n)&&!o().isNaN(n)&&o().includes(P,n)?n:0,localStorage.setItem("intervalTime",e),i(e)}}),[]);const R=(0,m.Z)({status:{main:"".concat(N)}}),[D,U]=(0,r.useState)(null),[W,X]=(0,r.useState)(null),[G,J]=(0,r.useState)(o().random(0,L)),[Q,q]=(0,r.useState)(null);F((()=>{B(),E(1e3*s)}),s>0?1e3*s:null),F((()=>{E((e=>{const t=e-1e3;return t>0?t:0}))}),1e3);(0,r.useEffect)((()=>{E(1e3*s)}),[s]),(0,r.useEffect)((()=>{const e=t[G];X(e);const c=n[e.wallpapers_dir];if(c.length>=1){const e=c.length-1;U(e),q(o().random(0,e))}}),[G]);(0,r.useEffect)((()=>{if(null!==Q){const e=n[W.wallpapers_dir][Q];k("".concat("dev"===l?"/wallpapers/":"https://inspop.fangyuanxiaozhan.com/wallpapers/")+W.wallpapers_dir+"/"+e)}}),[W,Q]);const B=()=>{J(G+1<=L?G+1:0),E(1e3*s)};return(0,r.useEffect)((()=>{if(S){const e=9,t="rgba(".concat(S[e][0],", ").concat(S[e][1],", ").concat(S[e][2],", 0.5)");C(t);const n=0,c="rgba(".concat(S[n][0],", ").concat(S[n][1],", ").concat(S[n][2],", 0.8)");O(c)}}),[S]),(0,c.jsxs)("div",{className:a().main,children:[(0,c.jsx)(y(),{children:W&&(0,c.jsx)("title",{children:W.en_source})}),(0,c.jsx)(_,{imageUrl:I,onColorExtracted:w}),(0,c.jsx)("div",{style:{position:"fixed",right:"10px",bottom:"10px",zIndex:50},children:(0,c.jsx)(v.Z,{theme:R,children:(0,c.jsx)(A,{checked:M,onChange:()=>{z(!M)}},N)})}),M&&(0,c.jsxs)("div",{style:{position:"fixed",width:"100vw",bottom:"10px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[(0,c.jsxs)(d.Z,{variant:"outlined",children:[(0,c.jsx)(u.Z,{style:{color:"#FFFFFF",border:"2px solid ".concat(Z),backgroundColor:"".concat(Z)},startIcon:(0,c.jsx)(x.Z,{}),onClick:()=>{null!==Q&&q(Q-1>=0?Q-1:D),E(1e3*s)},children:"WallPaper"}),(0,c.jsx)(u.Z,{style:{color:"#FFFFFF",border:"2px solid ".concat(Z),backgroundColor:"".concat(Z)},endIcon:(0,c.jsx)(p.Z,{}),onClick:()=>{null!==Q&&q(Q+1<=D?Q+1:0),E(1e3*s)},children:"WallPaper"})]}),(0,c.jsx)("div",{style:{height:"10px"}}),(0,c.jsxs)(d.Z,{variant:"outlined",children:[(0,c.jsx)(u.Z,{style:{color:"#FFFFFF",border:"2px solid ".concat(Z),backgroundColor:"".concat(Z)},startIcon:(0,c.jsx)(x.Z,{}),onClick:()=>{J(G-1>=0?G-1:L),E(1e3*s)},children:"Line"}),(0,c.jsx)(u.Z,{style:{color:"#FFFFFF",border:"2px solid ".concat(Z),backgroundColor:"".concat(Z)},endIcon:(0,c.jsx)(p.Z,{}),onClick:B,children:"Line"})]}),(0,c.jsx)("div",{style:{height:"10px"}}),(0,c.jsx)(h.Z,{sx:{boxShadow:"none","&.Mui-focused .MuiOutlinedInput-notchedOutline":{border:0},".MuiOutlinedInput-notchedOutline":{border:0},color:"#FFFFFF",backgroundColor:"".concat(Z)},type:"number",value:s,onChange:e=>{const t=parseInt(e.target.value);localStorage.setItem("intervalTime",t),t>=0&&(i(t),E(1e3*t))},label:"Auto Play",children:P.map(((e,t)=>(0,c.jsx)(j.Z,{value:e,children:T[t]},e)))}),(0,c.jsx)("div",{style:{height:"10px"}}),s>0&&(0,c.jsxs)("p",{style:{color:"rgba(255, 255, 255, 0.8)",textShadow:"2px 2px 4px ".concat(N)},children:["Switch after ",b/1e3," ",b>1e3?"seconds":"second"]})]}),W&&(0,c.jsx)("div",{className:a().item,children:(0,c.jsxs)("div",{id:N+Z,style:{width:"90%",padding:"10px",backdropFilter:"blur(2px)",borderRadius:"10px",backgroundColor:"rgba(0, 0, 0, 0.5)",color:"rgba(255, 255, 255, 0.8)",border:"2px solid ".concat(Z),textShadow:"2px 2px 4px ".concat(N)},children:[(0,c.jsxs)("div",{style:{textAlign:"left"},children:[(0,c.jsx)("p",{children:W.en_content}),(0,c.jsx)("p",{children:W.cn_content})]}),(0,c.jsx)("div",{style:{height:"16px"}}),(0,c.jsxs)("div",{style:{textAlign:"right"},children:[(0,c.jsx)("p",{children:W.en_source}),(0,c.jsx)("p",{children:W.cn_source})]})]})})]})}},2887:function(e){e.exports={fullScreenImage:"styles_fullScreenImage__u4Quw",item:"styles_item__uZrOz"}}},function(e){e.O(0,[662,262,774,888,179],(function(){return t=5557,e(e.s=t);var t}));var t=e.O();_N_E=t}]);