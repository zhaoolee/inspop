(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(507)}])},507:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSG:function(){return b},default:function(){return Home}});var l=n(5893),r=n(6486),c=n.n(r),o=n(7294),s=n(2887),a=n.n(s),i=n(269),u=n(1057),d=n(8553),x=n(1023),h=n(3619),p=n(5759),f=n(5071),m=n(8271),g=n(1265),v=n(2430),j=n(5819);function useInterval(e,t){let n=(0,o.useRef)();(0,o.useEffect)(()=>{n.current=e},[e]),(0,o.useEffect)(()=>{if(null!==t){let e=setInterval(function(){n.current()},t);return()=>clearInterval(e)}},[t])}let FullScreenImage=e=>{let{imageUrl:t,onColorExtracted:n}=e,r=(0,o.useRef)(null),c=new i.Z;return(0,o.useEffect)(()=>{function handleLoad(){let e=c.getPalette(r.current);n(e)}return r.current.complete?handleLoad():r.current.addEventListener("load",handleLoad),()=>{r.current.removeEventListener("load",handleLoad)}},[t,n]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("img",{ref:r,src:t,style:{display:"none"}}),(0,l.jsx)("div",{className:a().fullScreenImage,style:{backgroundImage:"url('".concat(t,"')")}})]})};var b=!0;function Home(e){let{csvData:t,wallpapersInfoJson:n,env:r}=e,[s,i]=(0,o.useState)(0),[b,F]=(0,o.useState)(1e3*s),[y,S]=(0,o.useState)(null),[_,I]=(0,o.useState)("/images/black.jpg"),[E,w]=(0,o.useState)("rgba(0, 0, 0, 0.2)"),[k,C]=(0,o.useState)("rgba(255, 255, 255, 0.5)"),Z=[0,5,10,20,30,60,300],N=["No Play","Every 5 seconds","Every 10 seconds","Every 20 seconds","Every half minute","Every 1 minute","Every 5 minutes"],L=t.length-1,[P,O]=(0,o.useState)(!1),T=(0,m.ZP)(f.Z)(e=>{let{theme:t}=e;return{color:t.status.main,"&.Mui-checked":{color:t.status.main}}});(0,o.useEffect)(()=>{{let e=0,t=localStorage.getItem("intervalTime");console.log("==localIntervalTime==",t);let n=c().toNumber(t);e=c().isNumber(n)&&!c().isNaN(n)&&c().includes(Z,n)?n:0,localStorage.setItem("intervalTime",e),i(e)}},[]);let M=(0,g.Z)({status:{main:"".concat(k)}}),[z,A]=(0,o.useState)(null),[R,V]=(0,o.useState)(null),[H,W]=(0,o.useState)(c().random(0,L)),[X,D]=(0,o.useState)(null);useInterval(()=>{nextCSVItem(),F(1e3*s)},s>0?1e3*s:null),useInterval(()=>{F(e=>{let t=e-1e3;return t>0?t:0})},1e3),(0,o.useEffect)(()=>{F(1e3*s)},[s]),(0,o.useEffect)(()=>{let e=t[H];V(e);let l=n[e.wallpapers_dir];if(l.length>=1){let e=l.length-1;A(e),D(c().random(0,e))}},[H]),(0,o.useEffect)(()=>{if(null!==X){let e=n[R.wallpapers_dir][X];I("".concat("dev"===r?"/wallpapers/":"https://inspop.fangyuanxiaozhan.com/wallpapers/")+R.wallpapers_dir+"/"+e)}},[R,X]);let nextCSVItem=()=>{H+1<=L?W(H+1):W(0),F(1e3*s)};return(0,o.useEffect)(()=>{if(y){let e="rgba(".concat(y[9][0],", ").concat(y[9][1],", ").concat(y[9][2],", 0.5)");w(e);let t="rgba(".concat(y[0][0],", ").concat(y[0][1],", ").concat(y[0][2],", 0.8)");C(t)}},[y]),(0,l.jsxs)("div",{className:a().main,children:[(0,l.jsx)(FullScreenImage,{imageUrl:_,onColorExtracted:S}),(0,l.jsx)("div",{style:{position:"fixed",right:"10px",bottom:"10px",zIndex:50},children:(0,l.jsx)(v.Z,{theme:M,children:(0,l.jsx)(T,{checked:P,onChange:()=>{O(!P)}},k)})}),P&&(0,l.jsxs)("div",{style:{position:"fixed",width:"100vw",bottom:"10px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[(0,l.jsxs)(d.Z,{variant:"outlined",children:[(0,l.jsx)(u.Z,{style:{color:"#FFFFFF",border:"2px solid ".concat(E),backgroundColor:"".concat(E)},startIcon:(0,l.jsx)(x.Z,{}),onClick:()=>{null!==X&&(X-1>=0?D(X-1):D(z)),F(1e3*s)},children:"WallPaper"}),(0,l.jsx)(u.Z,{style:{color:"#FFFFFF",border:"2px solid ".concat(E),backgroundColor:"".concat(E)},endIcon:(0,l.jsx)(h.Z,{}),onClick:()=>{null!==X&&(X+1<=z?D(X+1):D(0)),F(1e3*s)},children:"WallPaper"})]}),(0,l.jsx)("div",{style:{height:"10px"}}),(0,l.jsxs)(d.Z,{variant:"outlined",children:[(0,l.jsx)(u.Z,{style:{color:"#FFFFFF",border:"2px solid ".concat(E),backgroundColor:"".concat(E)},startIcon:(0,l.jsx)(x.Z,{}),onClick:()=>{H-1>=0?W(H-1):W(L),F(1e3*s)},children:"Line"}),(0,l.jsx)(u.Z,{style:{color:"#FFFFFF",border:"2px solid ".concat(E),backgroundColor:"".concat(E)},endIcon:(0,l.jsx)(h.Z,{}),onClick:nextCSVItem,children:"Line"})]}),(0,l.jsx)("div",{style:{height:"10px"}}),(0,l.jsx)(p.Z,{sx:{boxShadow:"none","&.Mui-focused .MuiOutlinedInput-notchedOutline":{border:0},".MuiOutlinedInput-notchedOutline":{border:0},color:"#FFFFFF",backgroundColor:"".concat(E)},type:"number",value:s,onChange:e=>{let t=parseInt(e.target.value);localStorage.setItem("intervalTime",t),t>=0&&(i(t),F(1e3*t))},label:"Auto Play",children:Z.map((e,t)=>(0,l.jsx)(j.Z,{value:e,children:N[t]},e))}),(0,l.jsx)("div",{style:{height:"10px"}}),s>0&&(0,l.jsxs)("p",{style:{color:"rgba(255, 255, 255, 0.8)",textShadow:"2px 2px 4px ".concat(k)},children:["Switch after ",b/1e3," ",b>1e3?"seconds":"second"]})]}),R&&(0,l.jsx)("div",{className:a().item,children:(0,l.jsxs)("div",{id:k+E,style:{width:"90%",padding:"10px",backdropFilter:"blur(2px)",borderRadius:"10px",backgroundColor:"rgba(0, 0, 0, 0.5)",color:"rgba(255, 255, 255, 0.8)",border:"2px solid ".concat(E),textShadow:"2px 2px 4px ".concat(k)},children:[(0,l.jsxs)("div",{style:{textAlign:"left"},children:[(0,l.jsx)("p",{children:R.en_content}),(0,l.jsx)("p",{children:R.cn_content})]}),(0,l.jsx)("div",{style:{height:"16px"}}),(0,l.jsxs)("div",{style:{textAlign:"right"},children:[(0,l.jsx)("p",{children:R.en_source}),(0,l.jsx)("p",{children:R.cn_source})]})]})})]})}},2887:function(e){e.exports={fullScreenImage:"styles_fullScreenImage__u4Quw",item:"styles_item__uZrOz"}}},function(e){e.O(0,[662,78,774,888,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);